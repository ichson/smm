const fetch = require('node-fetch');
const { TypeError, Error } = require('../error.js');

module.exports = async(webhook, username) => {

    if(typeof username !== 'string') throw new TypeError('INVALID_USERNAME', 'The provided username isn\'t an valid String');

    fetch(`https://discord.com/api/v9/webhooks/${(await webhook).id}/${(await webhook).token}`, {
        method: 'PATCH',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name: username }),
    })
    .catch(err => {
        throw new Error('UNEXPECTED_ERROR', err.message);
    });

};